<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="balgil.com.trip.comments">
	<select id="COMMENTS_SELECT_ALL"
		resultType="balgil.com.trip.comments.model.CommentsVO">
		select * from comments order by id desc
	</select>

	<select id="COMMENTS_SELECT_ONE"
		resultType="balgil.com.trip.comments.model.CommentsVO">
		select * from comments where id = #{id}
	</select>

	<insert id="COMMENTS_INSERT"
		parameterType="balgil.com.trip.comments.model.CommentsVO">
		insert into comments (id, rate, content, com_date,
		likes, user_id, act_id)
		values (#{id}, #{rate}, #{content},
		#{com_date}, #{likes}, #{user_id}, #{act_id})
	</insert>

	<update id="COMMENTS_UPDATE"
		parameterType="balgil.com.trip.comments.model.CommentsVO">
		update comments
		set 
<!-- 		rate = #{rate}, -->
		content = #{content},
		com_date = sysdate,
		save_name = #{save_name}
<!-- 		likes = #{likes}, -->
<!-- 		act_id = #{act_id} -->
		where id = #{id}
	</update>




	<delete id="COMMENTS_DELETE">
		delete from comments where id=#{id}
	</delete>

	<select id="selectWritableComments"
		parameterType="balgil.com.trip.reservation.model.ReservationVO">
		SELECT ID, QUANTITY, PRICE, RES_DATE, PRICE_FINAL,
		ACT_ID, USER_ID
		FROM Reservation
		WHERE id=#{id}
	</select>

	<select id="selectWrittenComments"
		parameterType="balgil.com.trip.comments.model.CommentsVO">
		SELECT ID, RATE, CONTENT, COM_DATE, LIKES, USER_ID,
		ACT_ID
		FROM Comments
		WHERE id=#{id}
	</select>
</mapper>